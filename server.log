warning: 'swifts3': found 1 file(s) which are unhandled; explicitly declare them as resources or exclude from the target
    /home/user/dev/SwiftS3/Tests/SwiftS3Tests/SQLStorageTests.swift.disabled
[0/1] Planning build
Building for debugging...
[0/2] Write swift-version-480714BACE3F7E29.txt
[2/3] Emitting module SwiftS3
[3/5] Wrapping AST for SwiftS3 for debugging
[4/6] Write Objects.LinkFileList
[5/6] Linking SwiftS3
Build of product 'SwiftS3' complete! (8.52s)
SQLiteNIO/SQLiteConnection.swift:339: Assertion failed: SQLiteConnection was not closed before deinitializing

*** Signal 4: Backtracing from 0x79d4c2ae2788... done ***

*** Program crashed: Illegal instruction at 0x000079d4c2ae2788 ***

Platform: x86_64 Linux (Debian GNU/Linux 13 (trixie))

Thread 0 "SwiftS3":

  0  0x000079d4c0e9a687 <unknown> in libc.so.6
...

Thread 1:

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 2:

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 3:

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 4 "NIO-ELT-1-#1":

  0              0x000079d4c0ea59ee <unknown> in libc.so.6
  1 [ra] [thunk] 0x00005e1b7bf25b3c partial apply for closure #1 in static Epoll.epoll_wait(epfd:events:maxevents:timeout:) + 27 in SwiftS3 at //<compiler-generated>
  2 [ra]         0x00005e1b7bfbbfc5 syscall<A>(blocking:where:_:) + 356 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/System.swift:314:23
  3 [ra]         0x00005e1b7bf26af5 static Epoll.epoll_wait(epfd:events:maxevents:timeout:) + 244 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/Linux.swift:175:13
  4 [ra]         0x00005e1b7bf94131 Selector.whenReady0(strategy:onLoopBegin:_:) + 1920 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/SelectorEpoll.swift:252:27
  5 [ra]         0x00005e1b7bf9b5b4 Selector.whenReady(strategy:onLoopBegin:_:) + 99 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/SelectorGeneric.swift:378:18
  6 [ra]         0x00005e1b7bf8e6eb SelectableEventLoop._blockingWaitForWork(nextReadyDeadline:_:) + 250 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/SelectableEventLoop.swift:829:28
  7 [ra]         0x00005e1b7bf8317d closure #2 in SelectableEventLoop.run() + 92 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/SelectableEventLoop.swift:903:26
  8 [ra] [thunk] 0x00005e1b7bf862a4 partial apply for closure #2 in SelectableEventLoop.run() + 19 in SwiftS3 at //<compiler-generated>
  9 [ra]         0x00005e1b7bf893d2 withAutoReleasePool<A>(_:) + 33 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/SelectableEventLoop.swift:49:16
 10 [ra]         0x00005e1b7bf8e9dd SelectableEventLoop.run() + 620 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/SelectableEventLoop.swift:902:17
 11 [ra]         0x00005e1b7bf30329 static MultiThreadedEventLoopGroup.runTheLoop(thread:uniqueID:parentGroup:canEventLoopBeShutdownIndividually:selectorFactory:initializer:metricsDelegate:_:) + 968 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/MultiThreadedEventLoopGroup.swift:117:22
 12 [ra]         0x00005e1b7bf29280 closure #1 in static MultiThreadedEventLoopGroup.setupThreadAndEventLoop(name:uniqueID:parentGroup:selectorFactory:initializer:metricsDelegate:) + 415 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/MultiThreadedEventLoopGroup.swift:139:41
 13 [ra] [thunk] 0x00005e1b7bf2c8e8 partial apply for closure #1 in static MultiThreadedEventLoopGroup.setupThreadAndEventLoop(name:uniqueID:parentGroup:selectorFactory:initializer:metricsDelegate:) + 87 in SwiftS3 at //<compiler-generated>
 14 [ra] [thunk] 0x00005e1b7bfc183f thunk for @escaping @callee_guaranteed (@guaranteed NIOThread) -> () + 14 in SwiftS3 at //<compiler-generated>
 15 [ra]         0x00005e1b7bfc4958 closure #1 in closure #1 in static ThreadOpsPosix.run(handle:args:) + 887 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-nio/Sources/NIOPosix/ThreadPosix.swift:186:21
 16 [ra] [thunk] 0x00005e1b7bfc4a19 @objc closure #1 in closure #1 in static ThreadOpsPosix.run(handle:args:) + 8 in SwiftS3 at //<compiler-generated>
 17 [ra]         0x000079d4c0e9db7b <unknown> in libc.so.6
...

Thread 5 "TP-#0":

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 6 "TP-#1":

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 7:

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 8:

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 9 crashed:

  0                  0x000079d4c2ae2788 _assertionFailure(_:_:file:line:flags:) + 264 in libswiftCore.so
  1 [ra]             0x00005e1b7c0326ac SQLiteConnection.deinit + 235 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/sqlite-nio/Sources/SQLiteNIO/SQLiteConnection.swift:339:9
  2 [ra] [system]    0x00005e1b7c032729 SQLiteConnection.__deallocating_deinit + 24 in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/sqlite-nio/Sources/SQLiteNIO/SQLiteConnection.swift
  3 [ra]             0x000079d4c2c4d280 _swift_release_dealloc + 15 in libswiftCore.so
  4 [ra]             0x000079d4c2c4db8f bool swift::RefCounts<swift::RefCountBitsT<(swift::RefCountInlinedness)1> >::doDecrementSlow<(swift::PerformDeinit)1>(swift::RefCountBitsT<(swift::RefCountInlinedness)1>, unsigned int) + 366 in libswiftCore.so
  5 [ra]             0x00005e1b7c0c2720 S3Server.run() + 303 in SwiftS3 at /home/user/dev/SwiftS3/Sources/SwiftS3/S3Server.swift:40:23
  6 [async]          0x00005e1b7c0d2570 SwiftS3.run() in SwiftS3 at /home/user/dev/SwiftS3/Sources/SwiftS3/SwiftS3.swift:43
  7 [async] [thunk]  0x00005e1b7c0d35c0 protocol witness for AsyncParsableCommand.run() in conformance SwiftS3 in SwiftS3 at //<compiler-generated>
  8 [async]          0x00005e1b7b36c7d0 static AsyncParsableCommand.main(_:) in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-argument-parser/Sources/ArgumentParser/Parsable Types/AsyncParsableCommand.swift:41
  9 [async]          0x00005e1b7b36cb70 static AsyncParsableCommand.main() in SwiftS3 at /home/user/dev/SwiftS3/.build/checkouts/swift-argument-parser/Sources/ArgumentParser/Parsable Types/AsyncParsableCommand.swift:61
 10 [async] [system] 0x00005e1b7c0d2920 static SwiftS3.$main() in SwiftS3 at //<compiler-generated>
 11 [async] [system] 0x00005e1b7c0d38e0 async_MainTQ0_ in SwiftS3 at //<compiler-generated>
 12 [async] [thunk]  0x00005e1b7c0d3980 thunk for @escaping @convention(thin) @async () -> () in SwiftS3 at //<compiler-generated>
 13 [async] [thunk]  0x00005e1b7c0d3a80 partial apply for thunk for @escaping @convention(thin) @async () -> () in SwiftS3 at //<compiler-generated>
 14 [async] [system] 0x000079d4c2f63330 completeTaskWithClosure(swift::AsyncContext*, swift::SwiftError*) in libswift_Concurrency.so
...

Thread 10:

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 11:

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...

Thread 12:

  0  0x000079d4c0ea59ee <unknown> in libc.so.6
...


Registers:

rax 0x0000000000000000  0
rdx 0x0000000000000002  2
rcx 0x000079d3354a1058  133948039106648
rbx 0x000079d4980008e0  07 00 07 00 07 00 07 00 07 00 05 00 06 00 06 00  ················
rsi 0x80005e1b7daaf760  9223475509020260192
rdi 0x0000000000000006  6
rbp 0x000079d4b67fb990  10 ba 7f b6 d4 79 00 00 ac 26 03 7c 1b 5e 00 00  ·º·¶Ôy··¬&·|·^··
rsp 0x000079d4b67fb920  03 00 00 00 00 00 00 00 e0 5a 00 a8 d4 79 00 00  ········àZ·¨Ôy··
 r8 0x0000000000000050  80
 r9 0x0000000000000035  53
r10 0x0000000000000000  0
r11 0x0000000000000000  0
r12 0x000079d4b67fc668  00 00 00 00 00 00 00 00 b0 8e 3d 86 1b 5e 00 00  ········°·=··^··
r13 0x000079d4a4000d00  88 f1 b8 7d 1b 5e 00 00 03 00 00 00 03 00 00 00  ·ñ¸}·^··········
r14 0x000079d4b800b190  e0 a0 00 b8 d4 79 00 00 70 25 0d 7c 1b 5e 00 00  à ·¸Ôy··p%·|·^··
r15 0x00005e1b863d8eb0  20 59 f8 c2 d4 79 00 00 03 00 00 00 00 00 00 00   YøÂÔy··········
rip 0x000079d4c2ae2788  0f 0b 48 8d 35 7f 0c fb ff 48 8d 55 a0 45 31 e4  ··H·5··ûÿH·U E1ä

rflags 0x0000000000010202  

cs 0x0033  fs 0x0000  gs 0x0000


Images (17 omitted):

0x00005e1b7b21c000–0x00005e1b7da35090 a804fd7c833b6a91ae4778efbcad060997ef961f SwiftS3                 /home/user/dev/SwiftS3/.build/x86_64-unknown-linux-gnu/debug/SwiftS3
0x000079d4c0e0b000–0x000079d4c0f962bd fce446c9d4ad48e2b0c90cce1a11722897805281 libc.so.6               /usr/lib/x86_64-linux-gnu/libc.so.6
0x000079d4c2800000–0x000079d4c2db16d0 f6273a3058ca00b1dc7702e6b35365b86788f2a4 libswiftCore.so         /home/user/.local/share/swiftly/toolchains/6.2.3/usr/lib/swift/linux/libswiftCore.so
0x000079d4c2ef0000–0x000079d4c2f7fc68 ad6d69357d59829eec9e43d568b2160c03b079e9 libswift_Concurrency.so /home/user/.local/share/swiftly/toolchains/6.2.3/usr/lib/swift/linux/libswift_Concurrency.so

Backtrace took 1.95s

